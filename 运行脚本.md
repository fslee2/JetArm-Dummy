# 调试运行脚本示例

> 本文档仅提供**可直接拷贝执行**的命令 / 代码片段，帮助快速启动当前已完成的功能。

---

## 1. 环境准备

```bash
# (可选) 建议在虚拟环境中进行
python3 -m venv .venv
source .venv/bin/activate

# 安装项目依赖（如有 requirements.txt 则替换为该文件）
pip install -r requirements.txt  # 若不存在可跳过
```

---

## 2. 在线硬件 + 调试运行

用于连接真实主臂 & 从臂（或 DummyRobot 实体）。

```bash
python3 teleop_debug_node.py \
    --leader_port /dev/ttyUSB2   # 主臂串口设备
```

可选参数：

| 参数 | 说明 | 默认 |
| ---- | ---- | ---- |
| `--loop_hz`   | 主循环频率 | `50` |
| `--safety_deg` | 启动时最大允许姿态偏差（度） | `15` |
| `--dry_run`   | 禁止向从臂发指令，仅打印 | `False` |

示例（更改频率并设置安全阈值）：

```bash
python3 teleop_debug_node.py \
    --leader_port /dev/ttyUSB0 \
    --loop_hz 100 \
    --safety_deg 10
```

---

## 3. 离线模拟 / 演示模式

若缺少真实 DummyRobot，可使用内置 `dummy_robot_simulator.py`，或完全 dry-run。

```bash
# 使用模拟器 (自动检测，无需特殊参数)
python3 teleop_debug_node.py --dry_run
```

在 Dry-run 模式下，主臂数据依旧会被读取并映射，但不会向任何从臂发送指令。

---

## 4. 手动调参示例

在 `teleop_debug_node.py` 顶部 `CONFIG` 字典中，可快速添加比例或偏置：

```python
CONFIG = {
    "scale": 1.0,   # 全局比例因子
    "offsets": {
        2: -5.0,     # follower J2 额外减 5°
        5: 10.0,     # follower J5 加 10°
    }
}
```

修改后保存即生效，无需改动其它文件。

---

## 5. 终止脚本

在终端中按 `Ctrl + C` 即可安全退出，中继节点会打印退出提示。

---

> 如需更深入调试，请参考 `功能总结.md` 中的关键代码说明。

